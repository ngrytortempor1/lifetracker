# LifeTracker é–‹ç™ºã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…ã¾ã§ã‚’çµ±åˆã—ãŸã‚¬ã‚¤ãƒ‰ã§ã™ã€‚


## ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®åŸå‰‡

- JSONL ã‚’å«ã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ãƒ»ç§»å‹•ãƒ»ä¸Šæ›¸ãã™ã‚‹å‡¦ç†ã§ã¯ã€å¿…ãšç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆYes/No ãªã©ï¼‰ã®æ‰¿èªã‚’å¾—ã¦ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã“ã¨ã€‚
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ã§è‡ªå‹•å‰Šé™¤ãŒå¿…è¦ãªå ´åˆã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒäº‹å‰ã«è¨±è«¾ã—ãŸè¨­å®šã‚„ãƒ•ãƒ­ãƒ¼ã‚’çµŒç”±ã•ã›ã‚‹ã€‚æœªè¨±è«¾çŠ¶æ…‹ã§ã®è‡ªå‹•å‰Šé™¤ã¯ç¦æ­¢ã€‚
- ä¾‹å¤–çš„ãªå‰Šé™¤ãƒ•ãƒ­ãƒ¼ã‚’å°å…¥ã™ã‚‹éš›ã¯ UX/ä»•æ§˜ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ–‡æ›¸æ›´æ–°ã‚’å…ˆã«è¡Œã„ã€ã“ã®ãƒ«ãƒ¼ãƒ«ã®ä¾‹å¤–ã‚’æ˜æ–‡åŒ–ã™ã‚‹ã€‚
- ã“ã®åŸå‰‡ã¯ LifeTracker ã®æ´¾ç”Ÿé–‹ç™ºã‚’å«ã‚€åŒä¸€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å…±æœ‰ã™ã‚‹ã€‚
- ãƒ†ã‚¹ãƒˆè¿½åŠ æ™‚ã¯ `docs/testing_strategy.md` ã‚’å¿…ãšå‚ç…§ã—ã€ãã“ã«è¨˜è¼‰ã•ã‚ŒãŸãƒ¦ãƒ‹ãƒƒãƒˆï¼UI ãƒ†ã‚¹ãƒˆæ–¹é‡ã«å¾“ã†ã€‚

---

## ğŸ“¥ ç’°å¢ƒæ§‹ç¯‰

### Android Studioã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ15åˆ†ï¼‰

#### ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
1. https://developer.android.com/studio ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒDownload Android Studioã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
1. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ `.exe` ã‚’å®Ÿè¡Œ
2. **é‡è¦**: ã™ã¹ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§OK
3. ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š
   - âœ… Android Studio
   - âœ… Android Virtual Device
   - âœ… Android SDK
   - âœ… Android SDK Platform

#### åˆå›èµ·å‹•
1. Android Studioã‚’èµ·å‹•
2. "Import Android Studio Settings" â†’ **Do not import settings**
3. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ãŒé–‹å§‹
4. **Standard** ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é¸æŠ
5. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§å¾…æ©Ÿï¼ˆæ•°GBã€10-15åˆ†ï¼‰

---

### å®Ÿæ©Ÿã®æº–å‚™ï¼ˆ5åˆ†ï¼‰

#### Androidã‚¹ãƒãƒ›ã‚’é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹

1. **ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’é€£æ‰“**
   ```
   è¨­å®š â†’ ãƒ‡ãƒã‚¤ã‚¹æƒ…å ± â†’ ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’7å›ã‚¿ãƒƒãƒ—
   â†’ ã€Œãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã«ãªã‚Šã¾ã—ãŸï¼ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
   ```

2. **USBãƒ‡ãƒãƒƒã‚°ã‚’æœ‰åŠ¹åŒ–**
   ```
   è¨­å®š â†’ ã‚·ã‚¹ãƒ†ãƒ  â†’ é–‹ç™ºè€…å‘ã‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³
   â†’ ã€ŒUSBãƒ‡ãƒãƒƒã‚°ã€ã‚’ONã«ã™ã‚‹
   ```

3. **PCã«æ¥ç¶š**
   ```
   USBã‚±ãƒ¼ãƒ–ãƒ«ã§PCã¨ã‚¹ãƒãƒ›ã‚’æ¥ç¶š
   â†’ ã‚¹ãƒãƒ›ã«ã€ŒUSBãƒ‡ãƒãƒƒã‚°ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿã€ã¨è¡¨ç¤º
   â†’ ã€Œè¨±å¯ã€ã‚’ã‚¿ãƒƒãƒ—
   ```

#### æ¥ç¶šç¢ºèª
Android Studioä¸‹éƒ¨ã®ã€ŒDevice Managerã€ã«å®Ÿæ©ŸãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ä¾å­˜é–¢ä¿‚

ä¸»ãªä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:

```kotlin
dependencies {
    // Compose BOM
    implementation(platform("androidx.compose:compose-bom:2024.02.00"))
    implementation("androidx.compose.ui:ui")
    implementation("androidx.compose.material3:material3")
    
    // Core Android
    implementation("androidx.core:core-ktx:1.12.0")
    implementation("androidx.lifecycle:lifecycle-runtime-ktx:2.7.0")
    implementation("androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0")
    implementation("androidx.lifecycle:lifecycle-runtime-compose")
    
    // Kotlinx Serialization
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.2")
    
    // Coroutines
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")
}
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
app/src/main/java/com/lifetracker/app/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ Event.kt
â”‚   â”‚   â”œâ”€â”€ Habit.kt
â”‚   â”‚   â”œâ”€â”€ Task.kt
â”‚   â”‚   â””â”€â”€ QuickLogTag.kt
â”‚   â””â”€â”€ local/
â”‚       â”œâ”€â”€ JsonlStorage.kt
â”‚       â”œâ”€â”€ EventRepository.kt
â”‚       â””â”€â”€ JsonTaskRepository.kt
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ DashboardScreen.kt
â”‚   â”‚   â”œâ”€â”€ HabitsScreen.kt
â”‚   â”‚   â””â”€â”€ TasksScreen.kt
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ HabitCard.kt
â”‚   â”‚   â”œâ”€â”€ TaskCard.kt
â”‚   â”‚   â””â”€â”€ TaskCreationForm.kt
â”‚   â””â”€â”€ theme/
â”‚       â””â”€â”€ Theme.kt
â”œâ”€â”€ viewmodel/
â”‚   â”œâ”€â”€ DashboardViewModel.kt
â”‚   â”œâ”€â”€ HabitsViewModel.kt
â”‚   â””â”€â”€ TasksViewModel.kt
â””â”€â”€ MainActivity.kt
```

---

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’**ã‚¤ãƒ™ãƒ³ãƒˆ**ã¨ã—ã¦è¨˜éŒ²ã—ã€JSONLå½¢å¼ã§æ°¸ç¶šåŒ–ã€‚

### ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

#### Eventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰

```kotlin
@Serializable
data class Event(
    val eventId: String = UUID.randomUUID().toString(),
    val timestamp: String, // ISO8601å½¢å¼
    val source: String = "android",
    val type: EventType,
    val payload: EventPayload
)

@Serializable
enum class EventType {
    HABIT_COMPLETED,
    TASK_COMPLETED,
    LOG_QUICK
}
```

#### Habitï¼ˆç¿’æ…£ï¼‰

```kotlin
@Serializable
data class Habit(
    val id: String,
    val name: String,
    val description: String = "",
    val color: String = "#6200EE",
    val icon: String = "âœ“",
    val createdAt: String,
    val isArchived: Boolean = false
)
```

#### Taskï¼ˆã‚¿ã‚¹ã‚¯ï¼‰

```kotlin
@Serializable
data class Task(
    val id: String,
    val title: String,
    val notes: String = "",
    val completed: Boolean = false,
    val important: Boolean = false,
    val myDay: Boolean = false,
    val dueDate: String? = null,
    val reminderTime: String? = null,
    val repeatRule: String? = null,
    val repeatDetail: String? = null,
    val listId: String = "default",
    val subtasks: List<Subtask> = emptyList(),
    val createdAt: String,
    val completedAt: String? = null
)
```

---

## ğŸ—ï¸ ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…

### ViewModelå±¤

#### HabitsViewModel

```kotlin
class HabitsViewModel(
    private val repository: EventRepository
) : ViewModel() {
    
    private val _uiState = MutableStateFlow<HabitsUiState>(HabitsUiState.Loading)
    val uiState: StateFlow<HabitsUiState> = _uiState.asStateFlow()
    
    init {
        loadHabits()
    }
    
    fun toggleHabitCompletion(habitId: String) {
        viewModelScope.launch {
            repository.logHabitCompletion(habitId)
            // UIæ›´æ–°
        }
    }
}
```

#### DashboardViewModel

```kotlin
class DashboardViewModel(
    private val taskRepository: JsonTaskRepository,
    private val habitRepository: EventRepository
) : ViewModel() {
    
    val uiState: StateFlow<DashboardUiState> = combine(
        taskRepository.tasks,
        habitRepository.habits,
        // ãã®ä»–ã®Flow
    ) { tasks, habits, ... ->
        // ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ã—ã¦DashboardUiStateã‚’ç”Ÿæˆ
    }.stateIn(
        scope = viewModelScope,
        started = SharingStarted.WhileSubscribed(5000),
        initialValue = DashboardUiState.Loading
    )
}
```

### Storageå±¤

#### JsonlStorage

```kotlin
class JsonlStorage(private val context: Context) {
    
    private val eventsFile: File
        get() = File(context.filesDir, "events.jsonl")
    
    suspend fun appendEvent(event: Event) = withContext(Dispatchers.IO) {
        val jsonLine = json.encodeToString(event)
        eventsFile.appendText("$jsonLine\n")
    }
    
    suspend fun readEvents(): List<Event> = withContext(Dispatchers.IO) {
        if (!eventsFile.exists()) return@withContext emptyList()
        
        eventsFile.readLines()
            .filter { it.isNotBlank() }
            .mapNotNull { line ->
                try {
                    json.decodeFromString<Event>(line)
                } catch (e: Exception) {
                    null
                }
            }
    }
}
```

---

## ğŸ¨ UIå®Ÿè£…

### Composeç”»é¢ã®åŸºæœ¬æ§‹é€ 

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun HabitsScreen(
    viewModel: HabitsViewModel,
    modifier: Modifier = Modifier
) {
    val uiState by viewModel.uiState.collectAsState()
    
    Scaffold(
        topBar = {
            TopAppBar(title = { Text("ä»Šæ—¥ã®ç¿’æ…£") })
        },
        floatingActionButton = {
            FloatingActionButton(onClick = { /* è¿½åŠ  */ }) {
                Icon(Icons.Default.Add, contentDescription = "è¿½åŠ ")
            }
        }
    ) { paddingValues ->
        when (val state = uiState) {
            is HabitsUiState.Loading -> {
                CircularProgressIndicator()
            }
            is HabitsUiState.Success -> {
                HabitsList(habits = state.habits)
            }
            is HabitsUiState.Error -> {
                ErrorMessage(message = state.message)
            }
        }
    }
}
```

### AnalyticsGraphScreenï¼ˆåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰

- `AnalyticsGraphScreen` ã¨ `AnalyticsGraphViewModel` ãŒã€äºˆæ¸¬å¯èƒ½æ€§ãƒ»ãƒ­ãƒ¼ãƒªãƒ³ã‚°å¹³å‡ãƒ»ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã® 3 ã¤ã®ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’ 1 ç”»é¢ã§æä¾›ã™ã‚‹ã€‚
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆæœŸé–“ï¼ãƒã‚±ãƒƒãƒˆå¹…ï¼ã‚µãƒ³ãƒ—ãƒ«é–¾å€¤ï¼ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ï¼ã‚¿ã‚°è¡¨ç¤ºæ•°ï¼‰ã¯ `AnalyticsGraphViewModel` ã®çŠ¶æ…‹ã¨åŒæ–¹å‘ã«åŒæœŸã—ã€TTL ä»˜ãã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãƒªãƒ­ãƒ¼ãƒ‰ã‚’æŠ‘åˆ¶ã™ã‚‹ã€‚
- ç”»é¢å³ä¸Šã®ãƒˆã‚°ãƒ«ã§ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºã¨ãƒ†ã‚­ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ´å¯Ÿã‚’æ–‡ç« åŒ–ã—ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã§ã‚‚èª­ã¿å–ã‚Šã‚„ã™ã„è¡¨ç¾ã«æ•´ãˆã¦ã„ã‚‹ã€‚
- ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `PredictabilityChart`, `RollingAverageChart`, `QuickLogTagLeaderboard`ã€‚ã©ã‚Œã‚‚ `Semantics` ã® `contentDescription` ã«è©³ç´°èª¬æ˜ã‚’æŒãŸã›ã¦ã„ã‚‹ãŸã‚ã€UI ãƒ†ã‚¹ãƒˆã§ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ¤œè¨¼ãŒå®¹æ˜“ã€‚
- ãƒã‚±ãƒƒãƒˆæ˜ç´°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‹ã‚‰ã¯é·ç§»ãƒšã‚¢ã¨ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’ç¢ºèªã§ãã€ç¿’æ…£åŒ–ã®å¼·å¼±ã‚’ãƒãƒ¼ãƒ å†…ã§è­°è«–ã™ã‚‹éš›ã®æ ¹æ‹ ã¨ã—ã¦æ´»ç”¨å¯èƒ½ã€‚

---

## âœ… é–‹ç™ºãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ç’°å¢ƒæ§‹ç¯‰
- [ ] Android Studioã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
- [ ] å®Ÿæ©Ÿã¾ãŸã¯ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®æº–å‚™å®Œäº†
- [ ] Hello Worldã‚¢ãƒ—ãƒªãŒå®Ÿæ©Ÿã§å‹•ä½œ

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
- [ ] Event, Habit, Task ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ä½œæˆ
- [ ] JsonlStorageå®Ÿè£…
- [ ] Repositoryå®Ÿè£…

### UIå®Ÿè£…
- [ ] ViewModelä½œæˆ
- [ ] Composableç”»é¢å®Ÿè£…
- [ ] MainActivityçµ±åˆ

### å‹•ä½œç¢ºèª
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] å®Ÿæ©Ÿã§èµ·å‹•
- [ ] ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ç¢ºèª

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å®Ÿæ©ŸãŒèªè­˜ã•ã‚Œãªã„
```powershell
# PowerShellã§ç¢ºèª
adb devices
```
- USBã‚±ãƒ¼ãƒ–ãƒ«ã‚’æŠœãå·®ã—
- ã‚¹ãƒãƒ›ã§ã€Œè¨±å¯ã€ã‚’ã‚¿ãƒƒãƒ—ã—ãŸã‹ç¢ºèª
- USBè¨­å®šã‚’ã€Œãƒ•ã‚¡ã‚¤ãƒ«è»¢é€ã€ã«å¤‰æ›´

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
```
File â†’ Invalidate Caches â†’ Invalidate and Restart
```

### Gradle Syncå¤±æ•—
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèª
- Gradleãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®äº’æ›æ€§ã‚’ç¢ºèª
- `.gradle`ãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤ã—ã¦å†åŒæœŸ

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [KotlinåŸºç¤](https://kotlinlang.org/docs/basic-syntax.html)
- [Jetpack Composeå…¥é–€](https://developer.android.com/jetpack/compose/tutorial)
- [Androidé–‹ç™ºã‚¬ã‚¤ãƒ‰](https://developer.android.com/guide)

### ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- r/androiddevï¼ˆRedditï¼‰
- Android Developers Discord
- Kotlin Slack

---

**é–‹ç™ºã‚’å§‹ã‚ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼ğŸš€**
