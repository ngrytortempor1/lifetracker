# Update Notes – 2025-02-06

## Added / Changed

1. **Home Dashboard**
   - Created `DashboardViewModel` to aggregate My Day count, today’s deadlines, completed tasks, and habit progress using existing repository flows (`LifeTracker/app/src/main/java/com/lifetracker/app/viewmodel/DashboardViewModel.kt`).
   - Added `DashboardScreen` for card-based overview with loading/error states (`LifeTracker/app/src/main/java/com/lifetracker/app/ui/screens/DashboardScreen.kt`).
   - Initialization runs on `Dispatchers.IO` to avoid blocking startup.

2. **Main Navigation Updates**
   - Bottom navigation now has four tabs: Home / Timer / Habits / Tasks (`LifeTracker/app/src/main/java/com/lifetracker/app/MainActivity.kt`).
   - Home tab wires the new dashboard ViewModel and screen.
   - Replaced deprecated `Icons.Default.List` usage with `Icons.AutoMirrored.Filled.List`.

3. **Pomodoro Timer Integration**
   - Implemented `PomodoroTimerViewModel` and `PomodoroTimerScreen` to provide focus/break cycles, pause/resume, and event logging (`LifeTracker/app/src/main/java/com/lifetracker/app/viewmodel/PomodoroTimerViewModel.kt`, `LifeTracker/app/src/main/java/com/lifetracker/app/ui/screens/PomodoroTimerScreen.kt`).
   - Added `POMODORO_COMPLETED` event payload and logging API (`LifeTracker/app/src/main/java/com/lifetracker/app/data/model/Event.kt`, `LifeTracker/app/src/main/java/com/lifetracker/app/core/repository/EventRepository.kt`, JSON implementation).
   - Task/Habit cards expose a timer button that opens the timer tab with the corresponding target pre-selected.
   - Notification permission flow added; quick-add dialog opens directly from the notification without launching the full app (Android 13+ handles runtime permission).
   - Timer presets retain quick 25/5 shortcuts in a horizontally scrollable chip row ("Custom" dialog remains for arbitrary durations).

4. **Documentation**
   - Added dependency diagram (`docs/todo_hub_dependencies.md`), lightweight implementation plan (`docs/todo_hub_feature_checklist.md`), and pomodoro spec draft (`docs/specs/pomodoro_linking.md`).
   - Updated dependency summary (`docs/依存関係とライブラリ.md`) and project change log (`docs/更新履歴.md`).

## Follow-up

- Surface pomodoro session summaries on the dashboard and task/habit detail views.
- Evaluate background execution (Foreground Service) for timer reliability.
- Expand event querying to compute daily pomodoro counts from stored JSONL data.
